//============================================================
//
//  title  : 双方向リストクラス [doublyLinkedList.h]
//  Author : 原田 陽央
//   Date  : 2021/10/07
//  Update : 2021/10/22
//
//============================================================
#pragma once


//============================================================
//　インクルード
//============================================================
#include <iostream>
#include <string>
using namespace std;


//============================================================
//　構造体宣言
//============================================================
// 成績データ構造体
struct RecordData
{
	int score;        // スコア
	string userName;  // ユーザー名
};


//============================================================
//　クラス宣言
//============================================================
class DoublyLinkedList
{
public:
	//============================================================
	// 《 ノード構造体 》
	struct Node
	{
		Node* prevPtr;         // 前のノードへのポインタ
		Node* nextPtr;         // 次のノードへのポインタ

		RecordData recordData; // 成績データ
	};
	//============================================================

private:

	Node* thisPtr; // ノードへのポインタ(前へは末尾に次へは先頭につなぐ)

public:
	//============================================================
	// 《 コンストイテレータクラス 》
	class ConstIterator
	{
	protected:
		Node* itePtr = nullptr;

	public:
		//------------------------------------------------------------
		//【 コンストラクタ 】
		//------------------------------------------------------------
		ConstIterator();

		//------------------------------------------------------------
		//【 引数付きコンストラクタ 】
		// thisPtr：双方向リストのthisPtrをいれる
		//------------------------------------------------------------
		ConstIterator(Node* thisPtr);

		//------------------------------------------------------------
		//【 デストラクタ 】
		//------------------------------------------------------------
		virtual ~ConstIterator();

		//------------------------------------------------------------
		//【 リストの末尾に向かって一つ進める（前置インクリメント） 】
		//------------------------------------------------------------
		ConstIterator& operator++();

		//------------------------------------------------------------
		//【 リストの末尾に向かって一つ進める（後置インクリメント） 】
		//------------------------------------------------------------
		ConstIterator& operator++(int);
		
		//------------------------------------------------------------
		//【 リストの先頭に向かって一つ進める（前置デクリメント） 】
		//------------------------------------------------------------
		ConstIterator& operator--();

		//------------------------------------------------------------
		//【 リストの先頭に向かって一つ進める（後置デクリメント） 】
		//------------------------------------------------------------
		ConstIterator& operator--(int);

		//------------------------------------------------------------
		//【 == 比較のオペレーター 】
		// ite：比較するイテレータオブジェクト
		//------------------------------------------------------------
		bool operator ==(const ConstIterator &ite) const;

		//------------------------------------------------------------
        //【 == 比較のオペレーター 】
        // ite：比較するイテレータオブジェクト
        //------------------------------------------------------------
		bool operator !=(const ConstIterator &ite) const;

		//------------------------------------------------------------
		//【 コンストイテレータの指す要素を取得する 】
		//------------------------------------------------------------		
		RecordData& GetConstData() const;

		//------------------------------------------------------------
		//【 コンストイテレータの持つNodeを取得する 】
		//------------------------------------------------------------
		Node* GetConstIteratorNode();

	};
	//============================================================

	//============================================================
	//　《 イテレータクラス 》
	class Iterator : public ConstIterator
	{
	public:
		//------------------------------------------------------------
		//【 コンストラクタ 】
		//------------------------------------------------------------
		Iterator();

		//------------------------------------------------------------
		//【 引数付きコンストラクタ 】
		// thisPtr：双方向リストのthisPtrをいれる
		//------------------------------------------------------------
		Iterator(Node* thisPtr);

		//------------------------------------------------------------
		//【 デストラクタ 】
		//------------------------------------------------------------
		~Iterator();

		//------------------------------------------------------------
		//【 リストの末尾に向かって一つ進める（前置インクリメント） 】
		//------------------------------------------------------------
		Iterator& operator++();

		//------------------------------------------------------------
		//【 リストの末尾に向かって一つ進める（後置インクリメント） 】
		//------------------------------------------------------------
		Iterator& operator++(int);

		//------------------------------------------------------------
		//【 リストの先頭に向かって一つ進める（前置デクリメント） 】
		//------------------------------------------------------------
		Iterator& operator--();

		//------------------------------------------------------------
		//【 リストの先頭に向かって一つ進める（後置デクリメント） 】
		//------------------------------------------------------------
		Iterator& operator--(int);

		//------------------------------------------------------------
	    //【 イテレータの指す要素を取得する 】
	    //------------------------------------------------------------
		RecordData& GetData();

		//------------------------------------------------------------
		//【 イテレータの持つNodeを取得する 】
		//------------------------------------------------------------
		Node* GetIteratorNode();
	};
	//============================================================


	//============================================================
	//　《 双方向リストクラス 》
	//------------------------------------------------------------
	//【 コンストラクタ 】
	//------------------------------------------------------------
	DoublyLinkedList();

	//------------------------------------------------------------
	//【 デストラクタ 】
	//------------------------------------------------------------
	~DoublyLinkedList();

	//------------------------------------------------------------
    //【 データの数の取得 】
    //　return：データの数
    //------------------------------------------------------------
	int GetDataCount() const;

	//------------------------------------------------------------
    //【 データの挿入 】
    //　addIterator：追加するコンストイテレータの情報
    //------------------------------------------------------------
	bool Insert(ConstIterator addConstIterator, int addScore, char* addUserName);

	//------------------------------------------------------------
	//【 データの挿入 】
	//　addIterator：追加するイテレータの情報
	//------------------------------------------------------------
	bool Insert(Iterator addConstIterator, int addScore, char* addUserName);

	//------------------------------------------------------------
	//【 データの削除 】
	//　addIterator：削除するコンストイテレータの情報
	//------------------------------------------------------------
	bool Remove(ConstIterator removeConstIterator);

	//------------------------------------------------------------
    //【 データの削除 】
    //　addIterator：削除するイテレータの情報
    //------------------------------------------------------------
	bool Remove(Iterator removeIterator);
	
	//------------------------------------------------------------
	//【 先頭イテレータ取得 】
	//　return：先頭のイテレータ
	//------------------------------------------------------------
	Iterator GetTopIterator();

	//------------------------------------------------------------
	//【 先頭コンストイテレータ取得 】
	//　return：先頭コンストイテレータ
	//------------------------------------------------------------
	ConstIterator GetTopConstIterator() const;

	//------------------------------------------------------------
	//【 末尾イテレータ取得 】
	//　return：末尾イテレータ
	//------------------------------------------------------------
	Iterator GetEndIterator();

	//------------------------------------------------------------
	//【 末尾コンストイテレータ取得 】
	//　return：末尾コンストイテレータ
	//------------------------------------------------------------
	ConstIterator GetEndConstIterator() const;
	//============================================================
};